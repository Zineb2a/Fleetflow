<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>login</title>
    <link rel="stylesheet" href="style2.css" />
</head>

<body background="6553651.webp">

    <div class="container">
        <div class="form sign-in-container" id="form" onsubmit="onysubmit();return false">
            <form action="#">
                <h1>Sign in</h1>

                <input id="username" type="username" placeholder="username">
                <input id="password" type="password" placeholder="Password">
                <a href="forgotpassword.html">Forgot your password?</a>
                <input type="submit" id="hi" value="log in">

            </form>
        </div>
        <div class="overlay-container">
            <div class="overlay">
                <div class="overlay-panel overlay-right">
                    <h1>Sign UP</h1>
                    <p>Sign up here if you don't have account.</p>
                    <button id="logInPage" class="signup_btn">Sign Up</button>
                </div>
            </div>
        </div>
    </div>




    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="sign.js"></script>
    <script>
        

        $("#logInPage").click(function () {
            location.href = "index.html"
        })



        function onysubmit() {
            m = $("#mail").val()
            p = $("#password").val()
            var h = 0


            $.ajax({
                type: 'GET',
                url: "http://localhost:8080/api/v1/user",
            
                success: function (data) {
                    console.log(data)
                    for (i in data) {
                        if (data[i].mail == m && data[i].password == p) {
                            localStorage.setItem("login", "true")
                            localStorage.setItem("mail", m)

                            window.location.href = "data.html"
                            h = 0
                            break
                        } else {
                            h = 1
                        }



                    }
                    if (h === 1) {
                        alert("the entered email or password are wrong")
                    }



                }



            })



            // if(m=="" || p==""){
            // alert("no field can be left blank")

            // return false}else{

            // for (var key in localStorage) {
            //     x = localStorage.getItem(key)

            //     if (m == key) {

            //         if (p == x) {

            //             var y = 5
            //             alert("done")
            //             setTimeout(function(){document.location.href = "data.html"},500);
            //             return false
            //         } else {
            //             var y = 1

            //             alert("wrong password")
            //             break
            //         }

            //     }

            // }


            // if (y === 5) {
            //     window.location.href = "data.html"
            // }




            // }



        }
















    </script>
</body>

</html>