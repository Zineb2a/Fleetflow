<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="SignUp.css">
    <title>Forgot Password Page</title>
</head>

<body>

    <body background="6553651.webp">

        <div class="container">
            <div class="form sign-in-container" id="form" onsubmit="onysubmit();return false">
                <form action="#">
                    <h1>Reset Your password</h1>
                    <input id="mail" type="email" placeholder="User Email">
                    <input id="password" type="password" placeholder="New Password">
                    <input type="submit" id="hi" value="Reset Password">
                </form>
            </div>
            <div class="overlay-container">
                <div class="overlay">
                    <div class="overlay-panel overlay-right">
                        <!-- <h1>Sign UP</h1>
                        <p>Sign up here if you don't have account.</p> -->
                        <button id="logInPage" class="signup_btn">Login</button>
                    </div>
                </div>
            </div>
        </div>
    </body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>

        $("#logInPage").click(function () {
            location.href = "Login.html"
        })

        function onysubmit() {
            let m = $("#mail").val()
            let p = $("#password").val()
            var ur = "http://localhost:8080/api/v1/user/" + m
            $.ajax({

                type: 'GET',
                url: ur,
                success: function (data) {
                    // console.log(data)
                    var a = data["name"]
                    var d = data["number"]
                    var settings = {
                        "url": ur,
                        "method": "PUT",
                        "timeout": 0,
                        "data": {
                            "name": a,
                            "password": p,
                            "number": d
                        }
                    };

                    $.ajax(settings).done(function (response) {
                        console.log(response);
                        alert("done")
                        location.href = "Login.html"
                    });
                }
            })
        }
    </script>
</html>